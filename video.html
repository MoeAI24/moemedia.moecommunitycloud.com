<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MoeMedia Video | Watch & Context</title>
  <meta name="description" id="metaDesc" content="Watch MoeMedia videos with added context, summaries, and related links." />
  <link rel="stylesheet" href="/assets/css/media.css" />
  <link rel="icon" href="/assets/img/moemedia-logo.svg" type="image/svg+xml" />

  <!-- VideoObject schema (filled by JS below) -->
  <script id="videoSchema" type="application/ld+json">{}</script>

<script id="orgSchema" type="application/ld+json">{"@context": "https://schema.org", "@type": "Organization", "name": "MoeMedia", "url": "https://moemedia.moecommunitycloud.com/", "parentOrganization": {"@type": "Organization", "name": "MoeCommunityCloud", "url": "https://moecommunitycloud.com/"}, "sameAs": [], "description": "Independent media and commentary from MoeCommunityCloud ‚Äî news, AI & tech, sports, and culture."}</script>

<script id="siteSchema" type="application/ld+json">{"@context": "https://schema.org", "@type": "WebSite", "name": "MoeMedia", "url": "https://moemedia.moecommunitycloud.com/", "publisher": {"@type": "Organization", "name": "MoeMedia", "url": "https://moemedia.moecommunitycloud.com/"}}</script>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header__inner">
        <a class="brand" href="/index.html"><div class="brand__mark"></div><div class="brand__text"><div class="brand__title">MOE MEDIA</div><div class="brand__sub">moemedia.moecommunitycloud.com</div></div></a>
        <nav class="nav" aria-label="Primary">
          <a href="/news.html">News</a>
          <a href="/ai-tech.html">AI &amp; Tech</a>
          <a href="/sports.html">Sports</a>
          <a href="/satire.html">Satire</a>
          <a href="/shorts.html">Shorts</a>
          <a href="/live.html">Live</a>
          <a href="/members.html">Members</a>
          <a href="/shop.html">Shop</a>
        </nav>
        <div class="header__actions">
          <button class="iconbtn" id="btnSearch">üîç</button>
          <button class="iconbtn" id="btnNotify">üîî</button>
          <a class="btn btn--red" href="/join.html">üî¥ Join</a>
        </div>
      </div>
    </div>
  </header>

  <div class="hero-strip" role="region" aria-label="MoeMedia banner">
    <div class="container hero-strip__inner">
      <div class="hero-strip__left">
        <span class="hero-strip__kicker">MOE MEDIA</span>
        <span class="hero-strip__tagline">Owned audience. Real commentary. Built on MoeCommunityCloud.</span>
      </div>
      <div class="hero-strip__right">
        <a class="btn btn--red" href="/join.html">üî¥ Join</a>
        <a class="btn" href="/shop.html">üõí Shop</a>
        <a class="btn" href="/news.html">‚ñ∂ Watch Latest</a>
      </div>
    </div>
  </div>


  <main>
    <div class="container">
      <section class="pagehead">
        <h1 id="vTitle">Video Title (Dynamic)</h1>
        <p id="vMeta">MoeMedia ‚Ä¢ Date ‚Ä¢ Category ‚Ä¢ Views</p>
      </section>
      <nav class="breadcrumbs" aria-label="Breadcrumb">
        <a href="/index.html">Home</a>
        <span aria-hidden="true">‚Ä∫</span>
        <a id="bcCat" href="/news.html">Category</a>
        <span aria-hidden="true">‚Ä∫</span>
        <span id="bcTitle">Video</span>
      </nav>


      <section class="layout">
        <div>
          <div class="card" style="overflow:hidden;">
            <div class="modal__media" style="aspect-ratio:16/9;">
              <iframe id="pageFrame" title="Video player" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>
            </div>
            <div class="card__body">
              <div class="tagrow">
                <span class="tag" id="vTag">CATEGORY</span>
                <button class="save" id="btnSaveHero" title="Save">‚≠ê</button>
              </div>

              <div style="display:flex; gap:12px; flex-wrap:wrap; margin-top:10px;">
                <a class="btn" id="watchYT" href="#" target="_blank" rel="noopener">‚ñ∂ Watch on YouTube</a>
                <a class="btn" href="/shop.html">üõí Shop</a>
                <a class="btn btn--red" href="/join.html">üî¥ Join</a>
              </div>

              <div class="adblock" style="margin-top:22px;"><strong>AdSense Slot Placeholder</strong><br/>Responsive unit after the player/CTA block.</div>

              <h2 style="margin:0 0 10px; font-size:22px; font-weight:900;">Context / Commentary</h2>
              <section class=\"video-context\">
                <h3>Context &amp; Summary</h3>
                <p>
                  This video provides commentary and analysis related to the topic shown above.
                  Content is intended to offer additional background, clarification, or
                  editorial perspective beyond the original source material.
                </p>
                <p>
                  MoeMedia content reflects independent commentary and is not affiliated with
                  the original creators or organizations referenced. Viewers are encouraged to
                  review original sources when available.
                </p>
              </section>

              <div class="notice" style="margin-top:16px;"><strong>Tip:</strong> Add 3 bullet ‚ÄúKey Takeaways‚Äù under this for SEO + retention.</div>
            </div>
          </div>

          <div class="sectionbar" style="margin-top:22px;"><h2>More Like This</h2></div>
          <div class="grid" id="videoGrid">
            <article class="card" data-cat="related">
              <a href="/video.html?v=dQw4w9WgXcQ&t=Related+Video&c=NEWS"><div class="thumb"><span class="duration">12:44</span></div></a>
              <div class="card__body">
                <div class="tagrow"><span class="tag">NEWS</span><button class="save" title="Save">‚≠ê</button></div>
                <h3 class="title">Related Video: Follow-up Breakdown</h3>
                <div class="meta"><span>MBCC</span><span>‚Ä¢</span><span>Jan 11</span></div>
              </div>
            </article>
          </div>
        </div>

        <aside class="rail">
          <div class="railbox">
            <h3>Join the Hub</h3>
            <form class="joinform" onsubmit="return false;">
              <div class="label">Email</div>
              <input class="input" type="email" placeholder="you@domain.com" required />
              <button class="btn btn--red" type="submit">üì© Weekly Drops</button>
              <div style="font-size:12px; opacity:.78;">Be first. No spam.</div>
            </form>
          </div>

          <div class="railbox">
            <h3>MBCC Offers</h3>
            <div class="rail-list">
              <a class="rail-item" href="https://moecommunitycloud.com/consulting.html"><div class="rail-thumb"></div><p class="rail-title">Consulting: Cloud + AI Delivery</p></a>
              <a class="rail-item" href="https://moecommunitycloud.com/partners.html"><div class="rail-thumb"></div><p class="rail-title">Partners: Work with MBCC</p></a>
            </div>
          </div>
        </aside>
      </section>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="footergrid">
        <div><p class="foothead">MoeMedia</p><p class="footmeta">Video page built for retention + conversion.</p></div>
        <div class="footlinks"><a href="/about.html">About</a><a href="/contact.html">Contact</a><a href="/advertise.html">Advertise</a><a href="/ethics.html">Ethics</a><a href="/privacy.html">Privacy</a></div>
        <div class="footlinks"><a href="https://moecommunitycloud.com/">‚Ü™ Back to MoeCommunityCloud.com</a><a href="/join.html">Join</a><a href="/shop.html">Shop</a></div>
      </div>
    </div>
  </footer>

  <script src="/assets/js/media.js"></script>
  <script>
    // Video detail loader + structured data (VideoObject + Key Moments)
    //
    // Supported query params:
    //   v=VIDEO_ID (required)
    //   t=Title (recommended)
    //   d=Description (recommended)
    //   c=Category tag (optional)
    //   u=Upload date in YYYY-MM-DD (IMPORTANT for schema accuracy)
    //   dur=ISO 8601 duration (e.g., PT12M44S)
    //   ts=Start time in seconds (used for deep links / key moments)
    //   km1..km8=Label~start~end  (optional Clip markup, e.g., km1=Intro~0~45)
    (function(){
      const params = new URLSearchParams(location.search);

      const v = params.get('v') || 'dQw4w9WgXcQ';
      const titleRaw = params.get('t') || 'MoeMedia Video';
      const descRaw  = params.get('d') || 'Watch the full breakdown on MoeMedia.';
      const cat      = params.get('c') || 'NEWS';

      // Only publish uploadDate if you pass it (don‚Äôt guess).
      const uploadDate = params.get('u'); // YYYY-MM-DD
      const duration   = params.get('dur'); // ISO 8601, e.g., PT12M44S

      // Timestamp support for deep links and SeekToAction
      const ts = (() => {
        const raw = params.get('ts');
        if (!raw) return null;
        const n = Number(raw);
        return Number.isFinite(n) && n >= 0 ? Math.floor(n) : null;
      })();

      const title = decodeURIComponent(titleRaw.replace(/\+/g,' '));

      // Update document title and meta description for SEO
      document.title = `${title} | MoeMedia`;
      const metaDescEl = document.getElementById('metaDesc');
      if (metaDescEl) metaDescEl.setAttribute('content', desc);

      // Breadcrumbs
      const bcTitle = document.getElementById('bcTitle');
      if (bcTitle) bcTitle.textContent = title;
      const bcCat = document.getElementById('bcCat');
      if (bcCat) {
        const catMap = { 'NEWS': ['/news.html','News'], 'AI': ['/ai-tech.html','AI & Tech'], 'AI & TECH': ['/ai-tech.html','AI & Tech'], 'SPORTS': ['/sports.html','Sports'], 'SATIRE': ['/satire.html','Satire'] };
        const key = (cat || '').toUpperCase();
        const mapped = catMap[key] || ['/news.html','News'];
        bcCat.href = mapped[0];
        bcCat.textContent = mapped[1];
      }

      const desc  = decodeURIComponent(descRaw.replace(/\+/g,' '));

      const vTitle = document.getElementById('vTitle');
      const vTag   = document.getElementById('vTag');
      const vMeta  = document.getElementById('vMeta');
      if (vTitle) vTitle.textContent = title;
      if (vTag) vTag.textContent = cat;
      if (vMeta) vMeta.textContent = `MoeMedia ‚Ä¢ ${cat} ‚Ä¢ ${new Date().toLocaleDateString()}`;

      const embedBase = `https://www.youtube.com/embed/${encodeURIComponent(v)}?rel=0&modestbranding=1`;
      const embedUrl  = ts !== null ? `${embedBase}&start=${ts}` : embedBase;
      const watchUrl  = `https://www.youtube.com/watch?v=${encodeURIComponent(v)}`;

      const frame = document.getElementById('pageFrame');
      if (frame) frame.src = embedUrl;

      const watchYT = document.getElementById('watchYT');
      if (watchYT) watchYT.href = watchUrl;

      // Build the page URL WITHOUT ts for schema template usage
      const cleanUrl = new URL(location.href);
      cleanUrl.searchParams.delete('ts');
      const pageUrl = cleanUrl.toString();

      // YouTube thumbnails
      const thumbMax = `https://i.ytimg.com/vi/${encodeURIComponent(v)}/maxresdefault.jpg`;
      const thumbHq  = `https://i.ytimg.com/vi/${encodeURIComponent(v)}/hqdefault.jpg`;

      // Optional Clip markup (km1..km8=Label~start~end)
      const clips = [];
      for (let i = 1; i <= 8; i++) {
        const key = `km${i}`;
        const val = params.get(key);
        if (!val) continue;
        const parts = val.split('~');
        if (parts.length < 3) continue;
        const label = decodeURIComponent(parts[0].replace(/\+/g,' ')).trim();
        const start = Number(parts[1]);
        const end   = Number(parts[2]);
        if (!label || !Number.isFinite(start) || start < 0 || !Number.isFinite(end) || end <= start) continue;
        const clipUrl = new URL(pageUrl);
        clipUrl.searchParams.set('ts', String(Math.floor(start)));
        clips.push({
          "@type": "Clip",
          "name": label,
          "startOffset": Math.floor(start),
          "endOffset": Math.floor(end),
          "url": clipUrl.toString()
        });
      }

      // VideoObject schema
      // Google guidance: required properties for rich results include name, thumbnailUrl, uploadDate.
      // We'll only emit markup when uploadDate is provided (don‚Äôt guess). 
      const schemaEl = document.getElementById('videoSchema');
      if (schemaEl && uploadDate) {
        const seekUrl = new URL(pageUrl);
        // URL template for Key Moments auto-detection (SeekToAction)
        // Google can use this pattern to generate timestamp links.
        const seekTemplate = seekUrl.toString() + (seekUrl.toString().includes('?') ? '&' : '?') + 'ts={seek_to_second_number}';

        const schema = {
          "@context": "https://schema.org",
          "@type": "VideoObject",
          "name": title,
          "description": desc,
          "thumbnailUrl": [thumbMax, thumbHq],
          "uploadDate": uploadDate,
          "embedUrl": embedBase,
          "url": pageUrl,
          "publisher": {
            "@type": "Organization",
            "name": "MoeMedia",
            "url": "https://moecommunitycloud.com/",
            "logo": {
              "@type": "ImageObject",
              "url": location.origin + "/assets/img/moemedia-logo.svg"
            }
          },
          "isFamilyFriendly": true,
          "potentialAction": {
            "@type": "SeekToAction",
            "target": seekTemplate,
            "startOffset-input": "required name=seek_to_second_number"
          }
        };

        if (duration) schema.duration = duration;
        if (clips.length) schema.hasPart = clips;

        schemaEl.textContent = JSON.stringify(schema);
      } else if (schemaEl) {
        schemaEl.textContent = "{}";
      }
    })();
  </script>
</body>
</html>
